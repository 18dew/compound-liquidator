(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{138:function(e,t,a){e.exports=a(368)},175:function(e,t){},177:function(e,t){},204:function(e,t){},249:function(e,t){},323:function(e,t,a){},326:function(e,t,a){},328:function(e,t,a){},365:function(e,t,a){},367:function(e){e.exports={}},368:function(e,t,a){"use strict";a.r(t);var n,s=a(1),o=a.n(s),c=a(128),l=a.n(c),r=a(129),i=a.n(r),u=(a(323),a(130)),p=a(131),d=a(135),m=a(132),y=a(136),b=a(33);a(119),a(326);var f=function(e){n=e.app;var t=[];e.accounts.forEach(function(e){var a=(e.totalEthSupply/1e18).toFixed(3),n=(e.totalEthBorrow/1e18).toFixed(3),s=+(a/n).toFixed(3),o="";o=s<1.5?"unsafe":s<=2?"risky":"safe";var c=(100*s).toFixed(1)+"%",l={address:e.address,supply:a,borrow:n,ratio:c,state:o,block:e.blockUpdated};t.push(l)});var a=[{Header:"Address",accessor:"address",maxWidth:750,Cell:function(e){return o.a.createElement("a",{href:"https://etherscan.io/address/"+e.value,target:"_blank"},e.value)}},{Header:"Supply",accessor:"supply",maxWidth:200,className:"right"},{Header:"Borrow",accessor:"borrow",maxWidth:200,className:"right"},{Header:"Ratio",accessor:"ratio",maxWidth:200,className:"right"},{Header:"State",accessor:"state",maxWidth:200,Cell:function(e){return o.a.createElement("span",null,o.a.createElement("span",{style:{color:"safe"===e.value?"#57d500":"risky"===e.value?"#ffbf00":"#ff2e00",transition:"all .3s ease"}},"\u25cf")," ","safe"===e.value?"Safe":"risky"===e.value?"Risky":"Unsafe")}},{Header:"",accessor:"liquidate",maxWidth:200,Cell:function(e){return o.a.createElement("button",{className:"InspectButton",onClick:function(){return t=e.row.address,void n.setState({inspected_address:t});var t}},"Inspect")}}];return o.a.createElement(b.a,{data:t,columns:a,defaultPageSize:20,showPageSizeOptions:!1,className:"-striped"})},h=(a(328),{tokens:[{symbol:"WETH",address:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",decimals:18},{symbol:"DAI",address:"0x89d24A6b4CcB1B6fAA2625fE562bDD9a23260359",decimals:18},{symbol:"BAT",address:"0x0D8775F648430679A709E98d2b0Cb6250d2887EF",decimals:18},{symbol:"ZRX",address:"0xE41d2489571d322189246DaFA5ebDe1F4699F498",decimals:18},{symbol:"REP",address:"0x1985365e9f78359a9B6AD760e32412f4a445E862",decimals:18}],moneyMarketABI:[{constant:!0,inputs:[{name:"account",type:"address"},{name:"asset",type:"address"}],name:"getBorrowBalance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"asset",type:"address"},{name:"amount",type:"uint256"}],name:"borrow",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"asset",type:"address"}],name:"assetPrices",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"account",type:"address"}],name:"calculateAccountValues",outputs:[{name:"",type:"uint256"},{name:"",type:"uint256"},{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"asset",type:"address"},{name:"amount",type:"uint256"}],name:"repayBorrow",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"collateralRatio",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"account",type:"address"},{name:"asset",type:"address"}],name:"getSupplyBalance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"collateralMarkets",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"asset",type:"address"},{name:"amount",type:"uint256"}],name:"supply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"asset",type:"address"},{name:"requestedAmount",type:"uint256"}],name:"withdraw",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"}]}),v=a(133);var _,w=function(e){var t=e.app,a=e.balanceType,n=e.stateProperty,s=t.state.inspected_address,c=[],l=h.moneyMarketABI,r=new(Object(v.useWeb3Context)().web3js.eth.Contract)(l,"0x3FDA67f7583380E67ef93072294a7fAc882FD7E7");h.tokens.forEach(function(e){var n={symbol:e.symbol,address:e.address,Borrowed:"loading balance...",Supplied:"loading balance...",liquidateAsset:e.symbol},o=e.address,l=o+a,i=Math.pow(10,e.decimals);"Borrowed"===a&&o in t.state.borrow_balances?n.Borrowed=t.state.borrow_balances[o]:"Supplied"===a&&o in t.state.supply_balances?n.Supplied=t.state.supply_balances[o]:Object.keys(t.state.pending_balances).length>0||(t.state.pending_balances[l]=0,"Borrowed"===a?r.methods.getBorrowBalance(s,o).call(function(e,a){if(delete t.state.pending_balances[l],null===e){var n=t.state.borrow_balances,s=(a>0?a/i:0).toFixed(3);0==s&&(s="0"),n[o]=s,t.setState({borrow_balances:n})}else t.setState({})}):r.methods.getSupplyBalance(s,o).call(function(e,a){if(delete t.state.pending_balances[l],null===e){var n=t.state.supply_balances,s=(a>0?a/i:0).toFixed(3);0==s&&(s="0"),n[o]=s,t.setState({supply_balances:n})}else t.setState({})})),c.push(n)});var i=[{Header:"Symbol",accessor:"symbol",maxWidth:200},{Header:"Address",accessor:"address",Cell:function(e){return o.a.createElement("a",{href:"https://etherscan.io/address/"+e.value,target:"_blank"},e.value)}},{Header:a,accessor:a,maxWidth:200,className:"right"},{Header:"",accessor:"liquidateAsset",maxWidth:100,Cell:function(e){return o.a.createElement("input",{type:"radio",checked:t.state[n]===e.value,onClick:function(){"asset_repay"===n?t.setState({asset_repay:e.value}):t.setState({asset_collect:e.value})},onChange:function(){}})}}];return o.a.createElement(b.a,{data:c,columns:i,showPagination:!1,sortable:!1,className:"AddressInspectorTable",defaultPageSize:c.length})};var E=function(e){var t=!1;return(_=e.app).state.asset_repay.length>0&&_.state.asset_collect.length>0&&(t=!0),o.a.createElement("div",null,o.a.createElement("p",null,"Choose an asset to receive at discount:"),o.a.createElement(w,{app:_,balanceType:"Supplied",stateProperty:"asset_collect"}),o.a.createElement("p",null,"Choose an asset to repay:"),o.a.createElement(w,{app:_,balanceType:"Borrowed",stateProperty:"asset_repay"}),o.a.createElement("br",null),o.a.createElement("button",{className:"LiquidateButton",disabled:!t},"Liquidate"))},g=a(134),k=a.n(g);a(365),a(367);var A=function(e){function t(){var e;return Object(u.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).state={accounts:[],inspected_address:"",borrow_balances:{},supply_balances:{},pending_balances:{},asset_repay:"",asset_collect:""},e}return Object(y.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){0==this.state.accounts.length&&this.refreshAccountList()}},{key:"render",value:function(){var e=this;return this.state.inspected_address.length>0?o.a.createElement("div",{className:"AddressInspector"},o.a.createElement("button",{onClick:function(){e.setState({inspected_address:"",borrow_balances:{},supply_balances:{},pending_balances:{},asset_repay:"",asset_collect:""})}},"Back"),o.a.createElement("b",null,"Account: ",this.state.inspected_address),o.a.createElement(E,{app:this})):0==this.state.accounts.length?o.a.createElement("div",null,o.a.createElement("img",{src:"./loading.gif",className:"Loading"})):o.a.createElement("div",{className:"AccountsTable"},o.a.createElement("b",null,"Compound Accounts"),o.a.createElement(f,{accounts:this.state.accounts,app:this}))}},{key:"refreshAccountList",value:function(){var e=this;k()({method:"post",url:"https://api.compound.finance/api/risk/v1/get_account_values",headers:{Accept:"application/json","Content-Type":"application/json"},data:{page_size:100,page_number:1,min_borrow_value_in_eth:{value:"50000000000000000"},max_collateral_ratio:{value:"5"}}}).then(function(t){console.log(t),function(e,t){var a=[];e.account_values.forEach(function(e){var t={address:e.address,totalEthBorrow:e.total_borrow_value_in_eth.value,totalEthSupply:e.total_supply_value_in_eth.value,blockUpdated:e.block_updated};a.push(t)}),t.setState({accounts:a})}(t.data,e)}).catch(function(e){console.error(e)})}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=document.getElementById("root");l.a.render(o.a.createElement(function(){return o.a.createElement(i.a,null,o.a.createElement(A,null))},null),B),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[138,8,7]]]);
//# sourceMappingURL=main.5c4736b0.chunk.js.map