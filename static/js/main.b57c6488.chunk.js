(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{137:function(e,t,a){e.exports=a(370)},174:function(e,t){},176:function(e,t){},203:function(e,t){},248:function(e,t){},322:function(e,t,a){},326:function(e,t,a){},328:function(e,t,a){},347:function(e,t,a){},367:function(e,t,a){},369:function(e){e.exports={}},370:function(e,t,a){"use strict";a.r(t);var n,s=a(1),i=a.n(s),o=a(128),u=a.n(o),d=a(129),l=a.n(d),p=(a(322),a(130)),r=a(131),c=a(134),y=a(132),m=a(135),b=a(34);a(324),a(326);var f=function(e){n=e.app;var t=[];e.accounts.forEach(function(e){var a=(e.totalEthSupply/1e18).toFixed(6),n=(e.totalEthBorrow/1e18).toFixed(6),s=+(a/n).toFixed(6),i="";i=s<1.5?"unsafe":s<=2?"risky":"safe";var o=(100*s).toFixed(2)+"%",u={address:e.address,supply:a,borrow:n,ratio:o,state:i,block:e.blockUpdated};t.push(u)});var a=[{Header:"Address",accessor:"address",maxWidth:750,Cell:function(e){return i.a.createElement("a",{href:"https://etherscan.io/address/"+e.value,target:"_blank"},e.value)}},{Header:"Supply",accessor:"supply",maxWidth:200,className:"right"},{Header:"Borrow",accessor:"borrow",maxWidth:200,className:"right"},{Header:"Ratio",accessor:"ratio",maxWidth:200,className:"right"},{Header:"State",accessor:"state",maxWidth:200,Cell:function(e){return i.a.createElement("span",null,i.a.createElement("span",{style:{color:"safe"===e.value?"#57d500":"risky"===e.value?"#ffbf00":"#ff2e00",transition:"all .3s ease"}},"\u25cf")," ","safe"===e.value?"Safe":"risky"===e.value?"Risky":"Unsafe")}},{Header:"",accessor:"liquidate",maxWidth:200,Cell:function(e){return i.a.createElement("button",{className:"InspectButton",onClick:function(){return t=e.row.address,a=e.original.state,void n.setState({inspected_address:t,inspected_address_state:a});var t,a}},"Inspect")}}];return i.a.createElement("div",{className:"AccountsTable"},i.a.createElement("p",null,i.a.createElement("b",null,"Accounts")),i.a.createElement(b.a,{data:t,columns:a,defaultPageSize:15,showPageSizeOptions:!1,className:"-striped"}),i.a.createElement("p",null,i.a.createElement("a",{href:"https://github.com/conlan/compound-liquidator",target:"_blank"},"Github")," | ",i.a.createElement("a",{href:"https://compound.finance",target:"_blank"},"Compound")," | ",i.a.createElement("a",{href:"https://compound.finance/developers#liquidate",target:"_blank"},"Documentation")," | Use at your own ",i.a.createElement("b",null,i.a.createElement("font",{color:"red"},"risk!"))))},h=(a(328),{tokens:[{symbol:"WETH",address:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",decimals:18},{symbol:"DAI",address:"0x89d24A6b4CcB1B6fAA2625fE562bDD9a23260359",decimals:18},{symbol:"BAT",address:"0x0D8775F648430679A709E98d2b0Cb6250d2887EF",decimals:18},{symbol:"ZRX",address:"0xE41d2489571d322189246DaFA5ebDe1F4699F498",decimals:18},{symbol:"REP",address:"0x1985365e9f78359a9B6AD760e32412f4a445E862",decimals:18}],moneyMarketAddress:"0x3FDA67f7583380E67ef93072294a7fAc882FD7E7",moneyMarketABI:[{type:"function",stateMutability:"view",payable:!1,outputs:[{type:"address",name:""}],name:"pendingAdmin",inputs:[],constant:!0},{type:"function",stateMutability:"view",payable:!1,outputs:[{type:"bool",name:""}],name:"paused",inputs:[],constant:!0},{type:"function",stateMutability:"view",payable:!1,outputs:[{type:"address",name:""}],name:"oracle",inputs:[],constant:!0},{type:"function",stateMutability:"view",payable:!1,outputs:[{type:"uint256",name:"mantissa"}],name:"liquidationDiscount",inputs:[],constant:!0},{type:"function",stateMutability:"view",payable:!1,outputs:[{type:"bool",name:"isSupported"},{type:"uint256",name:"blockNumber"},{type:"address",name:"interestRateModel"},{type:"uint256",name:"totalSupply"},{type:"uint256",name:"supplyRateMantissa"},{type:"uint256",name:"supplyIndex"},{type:"uint256",name:"totalBorrows"},{type:"uint256",name:"borrowRateMantissa"},{type:"uint256",name:"borrowIndex"}],name:"markets",inputs:[{type:"address",name:""}],constant:!0},{type:"function",stateMutability:"view",payable:!1,outputs:[{type:"uint256",name:"mantissa"}],name:"collateralRatio",inputs:[],constant:!0},{type:"function",stateMutability:"view",payable:!1,outputs:[{type:"uint256",name:"principal"},{type:"uint256",name:"interestIndex"}],name:"supplyBalances",inputs:[{type:"address",name:""},{type:"address",name:""}],constant:!0},{type:"function",stateMutability:"view",payable:!1,outputs:[{type:"uint256",name:"mantissa"}],name:"originationFee",inputs:[],constant:!0},{type:"function",stateMutability:"view",payable:!1,outputs:[{type:"address",name:""}],name:"collateralMarkets",inputs:[{type:"uint256",name:""}],constant:!0},{type:"function",stateMutability:"view",payable:!1,outputs:[{type:"address",name:""}],name:"admin",inputs:[],constant:!0},{type:"function",stateMutability:"view",payable:!1,outputs:[{type:"uint256",name:"principal"},{type:"uint256",name:"interestIndex"}],name:"borrowBalances",inputs:[{type:"address",name:""},{type:"address",name:""}],constant:!0},{type:"constructor",stateMutability:"nonpayable",payable:!1,inputs:[]},{type:"fallback",stateMutability:"payable",payable:!0},{type:"event",name:"SupplyReceived",inputs:[{type:"address",name:"account",indexed:!1},{type:"address",name:"asset",indexed:!1},{type:"uint256",name:"amount",indexed:!1},{type:"uint256",name:"startingBalance",indexed:!1},{type:"uint256",name:"newBalance",indexed:!1}],anonymous:!1},{type:"event",name:"SupplyWithdrawn",inputs:[{type:"address",name:"account",indexed:!1},{type:"address",name:"asset",indexed:!1},{type:"uint256",name:"amount",indexed:!1},{type:"uint256",name:"startingBalance",indexed:!1},{type:"uint256",name:"newBalance",indexed:!1}],anonymous:!1},{type:"event",name:"BorrowTaken",inputs:[{type:"address",name:"account",indexed:!1},{type:"address",name:"asset",indexed:!1},{type:"uint256",name:"amount",indexed:!1},{type:"uint256",name:"startingBalance",indexed:!1},{type:"uint256",name:"borrowAmountWithFee",indexed:!1},{type:"uint256",name:"newBalance",indexed:!1}],anonymous:!1},{type:"event",name:"BorrowRepaid",inputs:[{type:"address",name:"account",indexed:!1},{type:"address",name:"asset",indexed:!1},{type:"uint256",name:"amount",indexed:!1},{type:"uint256",name:"startingBalance",indexed:!1},{type:"uint256",name:"newBalance",indexed:!1}],anonymous:!1},{type:"event",name:"BorrowLiquidated",inputs:[{type:"address",name:"targetAccount",indexed:!1},{type:"address",name:"assetBorrow",indexed:!1},{type:"uint256",name:"borrowBalanceBefore",indexed:!1},{type:"uint256",name:"borrowBalanceAccumulated",indexed:!1},{type:"uint256",name:"amountRepaid",indexed:!1},{type:"uint256",name:"borrowBalanceAfter",indexed:!1},{type:"address",name:"liquidator",indexed:!1},{type:"address",name:"assetCollateral",indexed:!1},{type:"uint256",name:"collateralBalanceBefore",indexed:!1},{type:"uint256",name:"collateralBalanceAccumulated",indexed:!1},{type:"uint256",name:"amountSeized",indexed:!1},{type:"uint256",name:"collateralBalanceAfter",indexed:!1}],anonymous:!1},{type:"event",name:"NewPendingAdmin",inputs:[{type:"address",name:"oldPendingAdmin",indexed:!1},{type:"address",name:"newPendingAdmin",indexed:!1}],anonymous:!1},{type:"event",name:"NewAdmin",inputs:[{type:"address",name:"oldAdmin",indexed:!1},{type:"address",name:"newAdmin",indexed:!1}],anonymous:!1},{type:"event",name:"NewOracle",inputs:[{type:"address",name:"oldOracle",indexed:!1},{type:"address",name:"newOracle",indexed:!1}],anonymous:!1},{type:"event",name:"SupportedMarket",inputs:[{type:"address",name:"asset",indexed:!1},{type:"address",name:"interestRateModel",indexed:!1}],anonymous:!1},{type:"event",name:"NewRiskParameters",inputs:[{type:"uint256",name:"oldCollateralRatioMantissa",indexed:!1},{type:"uint256",name:"newCollateralRatioMantissa",indexed:!1},{type:"uint256",name:"oldLiquidationDiscountMantissa",indexed:!1},{type:"uint256",name:"newLiquidationDiscountMantissa",indexed:!1}],anonymous:!1},{type:"event",name:"NewOriginationFee",inputs:[{type:"uint256",name:"oldOriginationFeeMantissa",indexed:!1},{type:"uint256",name:"newOriginationFeeMantissa",indexed:!1}],anonymous:!1},{type:"event",name:"SetMarketInterestRateModel",inputs:[{type:"address",name:"asset",indexed:!1},{type:"address",name:"interestRateModel",indexed:!1}],anonymous:!1},{type:"event",name:"EquityWithdrawn",inputs:[{type:"address",name:"asset",indexed:!1},{type:"uint256",name:"equityAvailableBefore",indexed:!1},{type:"uint256",name:"amount",indexed:!1},{type:"address",name:"owner",indexed:!1}],anonymous:!1},{type:"event",name:"SuspendedMarket",inputs:[{type:"address",name:"asset",indexed:!1}],anonymous:!1},{type:"event",name:"SetPaused",inputs:[{type:"bool",name:"newState",indexed:!1}],anonymous:!1},{type:"event",name:"Failure",inputs:[{type:"uint256",name:"error",indexed:!1},{type:"uint256",name:"info",indexed:!1},{type:"uint256",name:"detail",indexed:!1}],anonymous:!1},{type:"function",stateMutability:"view",payable:!1,outputs:[{type:"uint256",name:""}],name:"getCollateralMarketsLength",inputs:[],constant:!0},{type:"function",stateMutability:"view",payable:!1,outputs:[{type:"uint256",name:""}],name:"assetPrices",inputs:[{type:"address",name:"asset"}],constant:!0},{type:"function",stateMutability:"nonpayable",payable:!1,outputs:[{type:"uint256",name:""}],name:"_setPendingAdmin",inputs:[{type:"address",name:"newPendingAdmin"}],constant:!1},{type:"function",stateMutability:"nonpayable",payable:!1,outputs:[{type:"uint256",name:""}],name:"_acceptAdmin",inputs:[],constant:!1},{type:"function",stateMutability:"nonpayable",payable:!1,outputs:[{type:"uint256",name:""}],name:"_setOracle",inputs:[{type:"address",name:"newOracle"}],constant:!1},{type:"function",stateMutability:"nonpayable",payable:!1,outputs:[{type:"uint256",name:""}],name:"_setPaused",inputs:[{type:"bool",name:"requestedState"}],constant:!1},{type:"function",stateMutability:"view",payable:!1,outputs:[{type:"int256",name:""}],name:"getAccountLiquidity",inputs:[{type:"address",name:"account"}],constant:!0},{type:"function",stateMutability:"view",payable:!1,outputs:[{type:"uint256",name:""}],name:"getSupplyBalance",inputs:[{type:"address",name:"account"},{type:"address",name:"asset"}],constant:!0},{type:"function",stateMutability:"view",payable:!1,outputs:[{type:"uint256",name:""}],name:"getBorrowBalance",inputs:[{type:"address",name:"account"},{type:"address",name:"asset"}],constant:!0},{type:"function",stateMutability:"nonpayable",payable:!1,outputs:[{type:"uint256",name:""}],name:"_supportMarket",inputs:[{type:"address",name:"asset"},{type:"address",name:"interestRateModel"}],constant:!1},{type:"function",stateMutability:"nonpayable",payable:!1,outputs:[{type:"uint256",name:""}],name:"_suspendMarket",inputs:[{type:"address",name:"asset"}],constant:!1},{type:"function",stateMutability:"nonpayable",payable:!1,outputs:[{type:"uint256",name:""}],name:"_setRiskParameters",inputs:[{type:"uint256",name:"collateralRatioMantissa"},{type:"uint256",name:"liquidationDiscountMantissa"}],constant:!1},{type:"function",stateMutability:"nonpayable",payable:!1,outputs:[{type:"uint256",name:""}],name:"_setOriginationFee",inputs:[{type:"uint256",name:"originationFeeMantissa"}],constant:!1},{type:"function",stateMutability:"nonpayable",payable:!1,outputs:[{type:"uint256",name:""}],name:"_setMarketInterestRateModel",inputs:[{type:"address",name:"asset"},{type:"address",name:"interestRateModel"}],constant:!1},{type:"function",stateMutability:"nonpayable",payable:!1,outputs:[{type:"uint256",name:""}],name:"_withdrawEquity",inputs:[{type:"address",name:"asset"},{type:"uint256",name:"amount"}],constant:!1},{type:"function",stateMutability:"nonpayable",payable:!1,outputs:[{type:"uint256",name:""}],name:"supply",inputs:[{type:"address",name:"asset"},{type:"uint256",name:"amount"}],constant:!1},{type:"function",stateMutability:"nonpayable",payable:!1,outputs:[{type:"uint256",name:""}],name:"withdraw",inputs:[{type:"address",name:"asset"},{type:"uint256",name:"requestedAmount"}],constant:!1},{type:"function",stateMutability:"view",payable:!1,outputs:[{type:"uint256",name:""},{type:"uint256",name:""},{type:"uint256",name:""}],name:"calculateAccountValues",inputs:[{type:"address",name:"userAddress"}],constant:!0},{type:"function",stateMutability:"nonpayable",payable:!1,outputs:[{type:"uint256",name:""}],name:"repayBorrow",inputs:[{type:"address",name:"asset"},{type:"uint256",name:"amount"}],constant:!1},{type:"function",stateMutability:"nonpayable",payable:!1,outputs:[{type:"uint256",name:""}],name:"liquidateBorrow",inputs:[{type:"address",name:"targetAccount"},{type:"address",name:"assetBorrow"},{type:"address",name:"assetCollateral"},{type:"uint256",name:"requestedAmountClose"}],constant:!1},{type:"function",stateMutability:"nonpayable",payable:!1,outputs:[{type:"uint256",name:""}],name:"borrow",inputs:[{type:"address",name:"asset"},{type:"uint256",name:"amount"}],constant:!1}]}),w=a(33);var v,x,_=function(e){var t=e.app,a=e.balanceType,n=e.stateProperty,s=t.state.inspected_address,o=[],u=h.moneyMarketAddress,d=h.moneyMarketABI,l=new(Object(w.useWeb3Context)().web3js.eth.Contract)(d,u);h.tokens.forEach(function(e){var n={symbol:e.symbol,address:e.address,liquidateAsset:e.symbol},i=e.address,u=i+a,d=Math.pow(10,e.decimals);n[a]="","Borrowed"===a&&i in t.state.borrow_balances?n.Borrowed=t.state.borrow_balances[i]:"Supplied"===a&&i in t.state.supply_balances?n.Supplied=t.state.supply_balances[i]:Object.keys(t.state.pending_balances).length>0||(t.state.pending_balances[u]=0,"Borrowed"===a?l.methods.getBorrowBalance(s,i).call(function(e,a){if(delete t.state.pending_balances[u],null===e){var n=t.state.borrow_balances,s=(a/d).toFixed(3);0==s&&(s="0"),n[i]=s,t.setState({borrow_balances:n})}else t.setState({})}):l.methods.getSupplyBalance(s,i).call(function(e,a){if(delete t.state.pending_balances[u],null===e){var n=t.state.supply_balances,s=(a/d).toFixed(3);0==s&&(s="0"),n[i]=s,t.setState({supply_balances:n})}else t.setState({})})),o.push(n)});var p=[{Header:"Symbol",accessor:"symbol",maxWidth:200},{Header:"Address",accessor:"address",Cell:function(e){return i.a.createElement("a",{href:"https://etherscan.io/address/"+e.value,target:"_blank"},e.value)}},{Header:a,accessor:a,maxWidth:200,className:"right"},{Header:"",accessor:"liquidateAsset",maxWidth:100,Cell:function(e){return i.a.createElement("input",{type:"radio",className:"LiquidateRadioInput",checked:t.state[n]===e.value,disabled:"Supplied"in e.original&&0==e.original.Supplied||"Borrowed"in e.original&&0==e.original.Borrowed||t.state.liquidateBlocked,onClick:function(){"asset_repay"===n?t.setState({asset_repay:e.value}):t.setState({asset_collect:e.value})},onChange:function(){console.log(0==e.original.Supplied)}})}}];return i.a.createElement(b.a,{data:o,columns:p,showPagination:!1,sortable:!1,className:"AddressInspectorTable -striped",defaultPageSize:o.length})},g=(a(347),"");var M=function(e){if(v=e.app,x=Object(w.useWeb3Context)(),""==g){if(0==Object.keys(v.state.pending_balances).length){var t=h.moneyMarketAddress,a=h.moneyMarketABI,n=new x.web3js.eth.Contract(a,t);n.methods.getAccountLiquidity(v.state.inspected_address).call(function(e,t){if(null==e){var a=(g=(t/1e18).toFixed(6))>=0;v.setState({liquidateBlocked:a})}else console.log(e)})}v.state.liquidationDiscount<0&&n.methods.liquidationDiscount().call(function(e,t){null==e&&(t/=1e18,v.setState({liquidationDiscount:t}))})}var s=!1,o="",u="",d="";v.state.asset_repay.length>0&&v.state.asset_collect.length>0&&(s=!0,o="You will repay (~"+-g+" ETH) worth of "+v.state.asset_repay+" to receive discounted "+v.state.asset_collect+". (Note: You need a sufficient balance to close the entire position. Repaying specific amounts coming soon.)"),v.state.repaySubmittedTxHash.length>0&&(u="Repay submitted! View your tx: ",d="https://etherscan.io/tx/"+v.state.repaySubmittedTxHash);var l="";l=v.state.liquidationDiscount<0?"-":100*v.state.liquidationDiscount;var p="";g.length>0&&(p=g+" ETH");var r="risky"===v.state.inspected_address_state?"#ffbf00":"safe"===v.state.inspected_address_state?"#57d500":"#ff2e00",c=v.state.inspected_address_state;return i.a.createElement("div",{className:"AddressInspector"},i.a.createElement("p",null,i.a.createElement("b",null,"Address:")," ",i.a.createElement("i",null,v.state.inspected_address)),i.a.createElement("p",null,i.a.createElement("b",null,"Account Liquidity:")," ",p),i.a.createElement("span",null,i.a.createElement("p",null,i.a.createElement("b",null,"State: "),i.a.createElement("span",{style:{color:r}},"\u25cf")," ",c)),i.a.createElement("p",null,"Choose an asset to receive at ",l,"% discount:"),i.a.createElement(_,{app:v,balanceType:"Supplied",stateProperty:"asset_collect"}),i.a.createElement("p",null,"Choose an asset to repay on behalf of borrower to return their ",i.a.createElement("b",null,"Account Liquidity")," to 0:"),i.a.createElement(_,{app:v,balanceType:"Borrowed",stateProperty:"asset_repay"}),i.a.createElement("p",{className:"LiquidationDetails"},o),i.a.createElement("p",{className:"TransactionSubmissionDetails"},u,i.a.createElement("a",{href:d,target:"_blank"},d)),i.a.createElement("div",{className:"ButtonDiv"},i.a.createElement("button",{className:"BackButton",onClick:function(){return g="",void v.setState({inspected_address:"",borrow_balances:{},supply_balances:{},pending_balances:{},asset_repay:"",asset_collect:"",repaySubmittedTxHash:"",liquidateBlocked:!0})}},"Back"),i.a.createElement("button",{className:"LiquidateButton",disabled:!s,onClick:function(){return function(){var e=x.account,t=v.state.inspected_address,a="",n="";h.tokens.forEach(function(e){e.symbol===v.state.asset_collect&&(n=e.address),e.symbol===v.state.asset_repay&&(a=e.address)});var s=h.moneyMarketAddress,i=h.moneyMarketABI;new x.web3js.eth.Contract(i,s).methods.liquidateBorrow(t,a,n,-1).send({from:e}).on("transactionHash",function(e){v.setState({asset_repay:"",asset_collect:"",repaySubmittedTxHash:e})})}()}},"Repay")))},E=a(133),B=a.n(E);a(367),a(369);var k=function(e){function t(){var e;return Object(p.a)(this,t),(e=Object(c.a)(this,Object(y.a)(t).call(this))).state={accounts:[],inspected_address:"",inspected_address_state:"",borrow_balances:{},supply_balances:{},pending_balances:{},asset_repay:"",asset_collect:"",repaySubmittedTxHash:"",liquidationDiscount:-1,liquidateBlocked:!0},e}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){0==this.state.accounts.length&&this.refreshAccountList()}},{key:"render",value:function(){return this.state.inspected_address.length>0?i.a.createElement(M,{app:this}):0==this.state.accounts.length?i.a.createElement("div",null,i.a.createElement("img",{src:"./loading.gif",className:"Loading"})):i.a.createElement(f,{accounts:this.state.accounts,app:this})}},{key:"refreshAccountList",value:function(){var e=this;B()({method:"post",url:"https://api.compound.finance/api/risk/v1/get_account_values",headers:{Accept:"application/json","Content-Type":"application/json"},data:{page_size:100,page_number:1,min_borrow_value_in_eth:{value:"50000000000000000"},max_collateral_ratio:{value:"5"}}}).then(function(t){console.log(t),function(e,t){var a=[];e.account_values.forEach(function(e){var t={address:e.address,totalEthBorrow:e.total_borrow_value_in_eth.value,totalEthSupply:e.total_supply_value_in_eth.value,blockUpdated:e.block_updated};a.push(t)}),t.setState({accounts:a})}(t.data,e)}).catch(function(e){console.error(e)})}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var A=document.getElementById("root");u.a.render(i.a.createElement(function(){return i.a.createElement(l.a,null,i.a.createElement(k,null))},null),A),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[137,8,7]]]);
//# sourceMappingURL=main.b57c6488.chunk.js.map